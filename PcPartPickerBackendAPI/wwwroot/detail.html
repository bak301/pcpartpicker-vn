<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>

<head>
    <title>TODO supply a title</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/bootstrap.css">
    <link rel="stylesheet" href="/css/main.css">
</head>

<body>
    <header>
        <div class="container">
            <div class="pcpp-header">
                <a href="/">
                    <h1>PCPartPicker</h1>
                </a>
                <ul class="user-nav">
                    <li><a href="/accounts/login/">Log In</a></li>
                    <li><a href="/accounts/register/">Register</a></li>
                </ul>
            </div>
        </div>
        <nav>
            <div class="container">
                <div class="nav-wrapper">
                    <div class="primary-nav">
                        <a href="/build" class="nav-build"><span>Make a</span> System Build</a>
                        <a href="/buildGuides.html"
                            class="nav-guides"><span>View the</span> Build Guides</a><a href="/buildGuides.html" class="nav-builds"><span>See
                                all</span> Completed Builds</a><a id="browse-parts-button" href="/buildGuides.html" class="nav-parts"><span>Browse
                                by</span> Individual Parts<span class="nav-dropdown"></span></a>
                    </div>
                    <div class="secondary-nav">
                        <div class="sub-links">
                            <a href="/products/pricedrop/">Price Drops</a><a href="/trends/">Price Trends</a><a href="/forums/">Forums</a><a
                                href="/blog/">Blog</a>
                        </div>
                        <div class="search"><a href="/search/" class="search-parts"></a></div>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    <div>
        <div class="part">
            <div class="hero">
                <div class="container">
                    <div class="title">
                        <h4 class="kind"></h4>
                        <h1 class="name"></h1>
                        <div class="rating">
                            <ul class="stars">
                                <li class="full-star"></li>
                                <li class="full-star"></li>
                                <li class="full-star"></li>
                                <li class="full-star"></li>
                                <li class="full-star"></li>
                            </ul>
                            <p>
                                <span itemprop="aggregateRating" itemscope="" itemtype="http://schema.org/AggregateRating">(
                                    <span itemprop="ratingValue">0</span> Average / <span itemprop="ratingCount">0</span>
                                    Ratings )</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="image-gallery">
                <div class="container">

                </div>
            </div>

            <div class="details">
                <div class="container">
                    <div class="column-wrapper">
                        <div class="left-column">
                            <div class="block">
                                <table class="action-box">
                                    <tbody>
                                        <tr>
                                            <td colspan="2" class="part-action-box-add">
                                                Quantity
                                                <select class="quantity" id="part_add_partlist_quantity">
                                                    <option value="1">1</option>
                                                </select>
                                                <a href="#" id="part_add_partlist" class="partlist-bnt">
                                                    Add to Part List
                                                </a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="part-action-box-favorite single-action">
                                                <a href="#save_to_favorites" id="part_add_favorite" class="favorites-btn">Save
                                                    to Favorites</a>
                                            </td>
                                            <td class="part-action-box-inventory single-action">
                                                <a href="#add_to_inventory" id="part_add_inventory" class="inventory-btn">Add
                                                    to Inventory</a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="specs block">
                                <h2>Specifications</h2>
                            </div>
                            <div class="block">
                                <h2>Compatible Parts</h2>
                                <ul class="find-compatible-parts">

                                    <li><a href="#">View Compatible CPU Coolers</a></li>

                                    <li><a href="#">View Compatible Motherboards</a></li>

                                    <li><a href="#">View Compatible Operating Systems</a></li>

                                </ul>
                            </div>
                        </div>
                        <div class="right-column">
                            <div class="prices block" itemprop="offers" itemscope="" itemtype="http://schema.org/AggregateOffer">

                                <h2>Prices</h2>

                                <table class="wide-table">
                                    <thead>
                                        <tr>
                                            <th class="th-merchant">Merchant</th>
                                            <th class="th-base">Base</th>
                                            <th class="th-promo">Promo</th>
                                            <th class="th-stock">Availability</th>
                                            <th class="th-total">Total</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                                <div class="email-alert">
                                    <form action="/products/pricenotify/add/sxDzK8/" method="post"><input type="hidden"
                                            name="csrfmiddlewaretoken" value="2yzW7e8hMNlL41GzUFqIobPNpN6FJEyH66WOO2vpNH3i7UjajMeVryNWupEzaDtf">
                                        <p>Send an e-mail alert if the price drops to: $ <input type="text" name="amount"
                                                value="380.97"><input type="submit" value="Set"></p>
                                        <p class="note">(Note: Price alerts now use your <a href="">merchant selections
                                                and tax settings</a>.)</p>
                                    </form>
                                </div>


                                <div style="margin-top:20px;color:#888;font-size:0.75em;">
                                    * Product prices and availability are accurate as of the date/time indicated and
                                    are subject to change. Any price and availability information displayed on
                                    Amazon.com at the time of purchase will apply to the purchase of this product.
                                </div>


                            </div> <!-- prices -->



                        </div>

                    </div>
                </div>
            </div>
        </div>


    </div>


    <footer class="modal-footer">
        <div class="container">
            <div class="footer-branding">
                <div class="copyright-notice">&copy;2018 PCPartPicker, LLC. All rights reserved.</div>
                <div class="switch-to-mobile"><a href="?flavor=mobile">Switch to Mobile Version</a></div>


            </div>
            <ul class="footer-nav">
                <h4>Sections</h4>
                <li><a href="/list/">System Builds</a></li>
                <li><a href="/guide/">Build Guides</a></li>
                <li><a href="/builds/">Completed Builds</a></li>
                <li><a href="/products/">Individual Parts</a></li>
            </ul>
            <ul class="footer-nav">
                <h4>PCPP</h4>
                <li><a href="/forums/">Forums</a></li>
                <li><a href="/products/pricedrop/">Price Drops</a></li>
                <li><a href="/trends/">Price Trends</a></li>
                <li><a href="/blog/">PCPP Blog</a></li>
            </ul>
            <ul class="footer-nav">
                <h4>PCPP</h4>
                <li><a href="/about/">About</a></li>
                <li><a href="/contact/">Contact &amp; Imprint</a></li>
                <li><a href="/tos/">Terms of Service</a></li>
                <li><a href="/code-of-conduct/">User Code of Conduct</a></li>
                <li><a href="/code-of-conduct/industry-affiliate/">Industry Code of Conduct</a></li>
                <li><a href="/privacy/">Privacy Policy</a></li>
                <li><a href="/disclosure/">Disclosure</a></li>
            </ul>
            <ul class="footer-nav">
                <h4>Elsewhere</h4>
                <li><a href="https://discord.gg/pcpartpicker">Discord</a></li>
                <li><a href="https://www.facebook.com/pcpartpicker">Facebook</a></li>
                <li><a href="https://instagram.com/pcpartpicker">Instagram</a></li>
                <li><a href="https://twitch.tv/pcpartpicker">Twitch</a></li>
                <li><a href="https://twitter.com/pcpartpicker">Twitter</a></li>
                <li><a href="https://www.youtube.com/user/pcpartpicker">YouTube</a></li>
            </ul>
        </div>
        <!-- <div class="container">
              <div class="pcpp-network">
                <h4>PCPP Network</h4>
                <div class="title-divider"></div>
                <ul>
                  <li><a href="http://pcpartpicker.com" id="pcpp"></a></li>
                </ul>
              </div>
            </div> -->

    </footer>

    <script src="/js/custom/build.js"></script>
    <script src="/js/custom/utility.js"></script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

    <script>
        window.onload = async function () {
            let urlParts = window.location.pathname.split('/');
            let id = urlParts[urlParts.length - 1];
            let partType = urlParts[urlParts.length - 2];

            let result = await fetchSpecs(partType, id);

            renderPartSpecfiation(result);
            renderPrices(result.id);

            let divKind = document.querySelector('h4.kind');
            divKind.innerText = partType.toUpperCase();
        }

        async function fetchSpecs(partType, id) {
            return await getJson(`api/${partType}/${id}`);
        }

        async function fetchPrices(partId) {
            return await getJson(`api/price/part/${partId}`);
        }

        function renderPartSpecfiation(json) {
            let divName = document.querySelector('h1.name');
            divName.innerText = json.name;
            delete json.name;

            let divSpecs = document.querySelector('div.specs.block');
            for (part in json) {
                divSpecs.innerHTML += `<h4>${part}</h4>${json[part]}`;
            }
        }

        async function renderPrices(id) {
            let prices = await fetchPrices(id);
            let body = document.querySelector('table.wide-table>tbody');

            console.log(prices);
            for (price of prices) {
                let row = document.createElement('tr');
                let totalCost = price.baseprice;
                row.innerHTML = `<td><a href='${price.url}'>${price.merchant}</a></td>` +
                    `<td>${price.baseprice.toLocaleString('vi-VN', { currency: 'VND', style: 'currency' })}</td>` +
                    `<td>${price.promotion || 'None'}</td>` +
                    `<td>${price.isinstock ? "<b>In Stock</b>" : ""}</td>` +
                    `<td><h5 class='total-cost tr'>${totalCost.toLocaleString('vi-VN', { currency: 'VND', style: 'currency' })}</h5></td>` +
                    `<td><a href='/build' class='btn-mds' onclick="addPart(${id}, '${price.merchant}', '${price.url}', ${totalCost})">Thêm</a></td>`;
                body.appendChild(row);
            }
        }

        function addPart(id, merchant, url, totalCost) {
            let currentBuild = new Build('currentBuild');

            let part = document.querySelector('h4.kind').innerText.toLowerCase();
            let name = document.querySelector('h1.name').innerText;

            currentBuild.add(part, {
                id: id,
                name: name,
                price: totalCost,
                merchant: merchant,
                url: url,
                images: "[]"
            });
        }
    </script>
</body>

</html>